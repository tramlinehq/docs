---
sidebar_position: 1
---

# Build Servers (CI/CD)

:::tip
[Contact us](mailto:hello@tramline.app?subject=%5Bvia%20docs%5D) and we'll help you get setup, including your Continuous Integration (CI) workflow.
:::

Tramline simplifies [version name and build number management](docs/automations.mdx#managing-version-names-and-build-numbers) across all your app releases. To achieve this, it requires that your build server accepts the version name and build number provided by Tramline when generating the binary for your app. To learn how to configure your workflows for Android and iOS, please refer to the sections below.

:::note
After setting up all the required integrations, you can configure your app to use the correct CI/CD workflow from the list of available workflows.
:::

## Android

Tramline requires that your configured workflow accepts the `versionCode` and `versionName` as environment variables and uses them to generate the build that will be uploaded to the distribution channels. You should create separate workflows to generate debug (unsigned) and production (signed) builds. Debug builds are not mandatory, but they can be helpful for testing purposes.

If you have configured Tramline to deploy to PlayStore, your production workflow should generate a valid `.aab` file as an artifact. After the workflow is successful, Tramline will download this artifact and upload it to PlayStore on your behalf. If your workflow generates multiple artifacts, Tramline will choose the larger one.

For non-production builds, Tramline looks for any artifact being generated by the workflow.

:::note
For Bitrise, the accepted environment variables for the workflow are currently `BUILD_NUMBER` and `BUILD_VERSION`.
:::

### Supported integrations

- [GitHub Actions](github)
- [Bitrise](bitrise)

A sample workflow for android apps can be generated using our [Mobile App CI workflow GEnerator](https://macige.tramline.app/). Please check the checkbox to include support for `versionCode` and `versionName`.

![](/img/macige.png)


## iOS

Tramline requires that your configured workflow accepts the `BUILD_NUMBER` and `BUILD_VERSION` as environment variables and uses them to generate the build that will be uploaded to the distribution channels.

If you have configured Tramline to distribute to TestFlight or App Store, your production workflow should upload the generated build with correct `BUILD_NUMBER` and `BUILD_VERSION` to be uploaded to App Store.

Tramline will look for the build in App Store with the correct `BUILD_NUMBER` to be present in TestFlight to send to beta groups and prepare release to App Store.

:::note
For iOS apps, you can reach to us and we will help you set up the workflow as per your needs.
:::

### Supported integrations

- [Bitrise](bitrise)

Here is a sample Bitrise workflow which uses Fastlane plugin for Bitrise to upload a signed build to the App Store.

```yaml
format_version: "11"
project_type: flutter
workflows:
  deploy:
    steps:
    - activate-ssh-key@4: {}
    - git-clone@7: {}
    - certificate-and-profile-installer@1: {}
    - flutter-installer@0: {}
    - cache-pull@2: {}
    - manage-ios-code-signing@1:
        inputs:
        - distribution_method: app-store
    - flutter-build@0:
        inputs:
        - project_location: $BITRISE_FLUTTER_PROJECT_LOCATION
        - platform: ios
        - additional_build_params: --build-number=$BUILD_NUMBER --build-name=$BUILD_VERSION
        - ios_output_type: archive
    - xcode-archive@4:
        inputs:
        - distribution_method: app-store
    - deploy-to-itunesconnect-deliver@2:
        inputs:
        - bundle_id: com.tramline.new_app
        - skip_app_version_update: "yes"
        - connection: api_key
    envs:
    - opts:
        is_expand: false
      BITRISE_PROJECT_PATH: ios/Runner.xcworkspace
    - opts:
        is_expand: false
      BITRISE_SCHEME: Runner
meta:
  bitrise.io:
    stack: osx-xcode-14.2.x-ventura
    machine_type_id: g2.4core
app:
  envs:
  - opts:
      is_expand: false
    BITRISE_FLUTTER_PROJECT_LOCATION: .
```

You can see a working iOS workflow for a Flutter app [here](https://github.com/tramlinehq/ueno/blob/main-ios/bitrise.yml). You can also see the relevant code in Tramline [here](https://github.com/tramlinehq/tramline/blob/main/app/libs/installations/bitrise/api.rb#L50).
